<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <title>Web TeleDOC</title>

    <script type="text/javascript">
      function send_command(cmd) {
         $.post("{{ url_for('command') }}", {"command_id" : cmd}, function( data ) {});
      }

      $(function(){
         $('#toggle_camera').on('click', function(e) {
            if ($("#camera").attr("src") == "") {
               $("#camera").attr("src", "{{ url_for('video_feed') }}");
            }
            else {
               $("#camera").attr("src", "");
            }
         });

         $(function(){
            $('#up').on('click', function(e) {
               send_command("up");
            });
         });

         $(function(){
            $('#down').on('click', function(e) {
               send_command("down");
            });
         });

         $(function(){
            $('#left').on('click', function(e) {
               send_command("left");
            });
         });

         $(function(){
            $('#right').on('click', function(e) {
               send_command("right");
            });
         });

         $(function(){
            $('#fire').on('click', function(e) {
               send_command("fire");
            });
         });

         $(document).keydown(function(e) {
            switch(e.which) {
               case 37: // left
               send_command("left");
               break;

               case 38: // up
               send_command("up");
               break;

               case 39: // right
               send_command("right");
               break;

               case 40: // down
               send_command("down");
               break;

               case 13: // enter
               case 32: // space
               case 70: // 'f'
               send_command("fire");
               break;

               default: return; // exit this handler for other keys
            }
            e.preventDefault(); // prevent the default action (scroll / move caret)
         });
      });
    </script>
  </head>
  <body>
    <h1>Web TeleDOC</h1>
    <div width="512" style="position: relative;">
      <img id="camera" src="" width="512" height="384" border="2" style="z-index: -1" />
      <div style="position:absolute; left:0px;top:0px; font-size: 50px;width: 512px; height: 384px; text-align: center; line-height: 384px;">
        +
      </div>
    </div>
    <br />
    <input id="toggle_camera" name="toggle_camera" type="button" value="Toggle Camera" \>
    <input id="up" name="up" type="button" value="Up" \>
    <input id="down" name="down" type="button" value="Down" \>
    <input id="left" name="left" type="button" value="Left" \>
    <input id="right" name="right" type="button" value="Right" \>
    <input id="fire" name="fire" type="button" value="Fire" \>
  </body>
</html>
